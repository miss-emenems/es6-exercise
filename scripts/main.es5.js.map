{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.es5.js","sourcesContent":["/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// A Sticky Notes app.\nclass StickyNotesApp {\n\n    // Initializes the Sticky Notes app.\n    constructor() {\n        // Shortcuts to DOM Elements.\n        this.notesContainer = document.getElementById('notes-container');\n        this.noteMessageInput = document.getElementById('message');\n        this.addNoteButton = document.getElementById('save');\n        this.notesSectionTitle = document.getElementById('notes-section-title');\n\n        // Saves notes on button click.\n        this.addNoteButton.addEventListener('click', () => this.saveNote());\n\n        // Toggle for the button.\n        this.noteMessageInput.addEventListener('keyup', () => this.toggleButton());\n\n        // Loads all the notes.\n        for (let key in localStorage) {\n            this.displayNote(key, localStorage[key]);\n        }\n\n        // Listen for updates to notes from other windows.\n        window.addEventListener('storage', function(e) {\n            this.displayNote(e.key, e.newValue);\n        }.bind(this));\n    }\n\n\n    // Saves a new sticky note on localStorage.\n    saveNote() {\n        if (this.noteMessageInput.value) {\n            let key = Date.now().toString();\n            localStorage.setItem(key, this.noteMessageInput.value);\n            this.displayNote(key, this.noteMessageInput.value);\n            StickyNotesApp.resetMaterialTextfield(this.noteMessageInput);\n            this.toggleButton();\n        }\n    };\n\n    // Resets the given MaterialTextField.\n    static resetMaterialTextfield(element) {\n        element.value = '';\n        element.parentNode.MaterialTextfield.boundUpdateClassesHandler();\n        element.blur();\n    };\n\n    // Creates/updates/deletes a note in the UI.\n    displayNote(key, message) {\n        let note = document.getElementById(key);\n        // If no element with the given key exists we create a new note.\n        if (!note) {\n            note = document.createElement('sticky-note');\n            note.id = key;\n            this.notesContainer.insertBefore(note, this.notesSectionTitle.nextSibling);\n        }\n        // If the message is null we delete the note.\n        if (!message) {\n            return note.deleteNote();\n        }\n        note.setMessage(message);\n    };\n\n    // Enables or disables the submit button depending on the values of the input field.\n    toggleButton() {\n        if (this.noteMessageInput.value) {\n            this.addNoteButton.removeAttribute('disabled');\n        } else {\n            this.addNoteButton.setAttribute('disabled', 'true');\n        }\n    };\n\n}\n\n\n\n\n// On load start the app.\nwindow.addEventListener('load', function() {\n    new StickyNotesApp();\n});\n\n// A Sticky Note custom element that extends HTMLElement.\n\nclass StickyNote extends HTMLElement {\n\n    // Fires when an instance of the element is created.\n    createdCallback() {\n      this.classList.add(...StickyNote.CLASSES);\n      this.innerHTML = StickyNote.TEMPLATE;\n      this.messageElement = this.querySelector('.message');\n      this.dateElement = this.querySelector('.date');\n      this.deleteButton = this.querySelector('.delete');\n      this.deleteButton.addEventListener('click', this.deleteNote.bind(this));\n    };\n\n\n    // Fires when an attribute of the element is added/deleted/modified.\n    attributeChangedCallback(attributeName) {\n        // We display/update the created date message if the id changes.\n        if (attributeName == 'id') {\n          let date;\n            if (this.id) {\n              date = new Date(parseInt(this.id));\n            } else {\n              date = new Date();\n            }\n\n            let dateFormaterOptions = {day: 'numeric', month: 'short'};\n            let shortDate = new Intl.DateTimeFormat(\"en-US\", dateFormaterOptions).format(date);\n            this.dateElement.textContent = `Created on ${shortDate}`;\n        }\n    };\n\n    // Sets the message of the note.\n    setMessage(message) {\n        this.messageElement.textContent = message;\n        // Replace all line breaks by <br>.\n        this.messageElement.innerHTML = this.messageElement.innerHTML.replace(/\\n/g, '<br>');\n    };\n\n    // Deletes the note by removing the element from the DOM and the data from localStorage.\n    deleteNote() {\n        localStorage.removeItem(this.id);\n        this.parentNode.removeChild(this);\n    };\n\n}\n\n\n// Initial content of the element.\nStickyNote.TEMPLATE =\n    `<div class=\"message\"></div>\n    <div class=\"date\"></div>\n    <button class=\"delete mdl-button mdl-js-button mdl-js-ripple-effect\">\n    Delete\n    </button>`;\n\n\n// StickyNote elements top level style classes.\nStickyNote.CLASSES = ['mdl-cell--4-col-desktop', 'mdl-card__supporting-text', 'mdl-cell--12-col',\n    'mdl-shadow--2dp', 'mdl-cell--4-col-tablet', 'mdl-card', 'mdl-cell', 'sticky-note'];\n\n\n\n\n\ndocument.registerElement('sticky-note', StickyNote);\n"]}